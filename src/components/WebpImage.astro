---
// WebpImage.astro - Un componente para usar im√°genes WebP con fallback
const { src, alt, width, height, class: className } = Astro.props;

// Verificar si la ruta de la imagen comienza con /images/
const isLocalImage = src.startsWith('/images/');

// Crear la ruta de la imagen WebP
let webpSrc = src;
if (isLocalImage) {
  webpSrc = src.replace('/images/', '/images/webp/').replace(/\.(png|jpg|jpeg|gif)$/, '.webp');
}
---

<picture>
  <source srcset={webpSrc} type="image/webp">
  <img 
    src={src} 
    alt={alt} 
    width={width} 
    height={height} 
    class={className}
    loading="lazy"
  />
</picture>

<style>
  img {
    max-width: 100%;
    height: auto;
  }
</style>
